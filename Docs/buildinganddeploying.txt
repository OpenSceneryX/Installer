Building and Deploying the Installer
====================================

Building
--------

o The Windows version of the installer needs the zlib1 DLL to be included at the same level as the executable.  This is done by a Windows build step, but the DLL must be downloaded and present at Libraries/zlib1-64/zlib1.dll

o The Windows version needs to run as an administrator.  This is done by a Windows build step, but the Windows VM must have rcedit from https://github.com/electron/rcedit installed.

o The Windows version is signed during the build, but signtool needs to be installed in the VM which is part of the Windows 10 SDK (https://go.microsoft.com/fwlink/?LinkID=698771).

o The Mac app is signed automatically by the build process.

o Upload all installers to the AWS S3 bucket, replacing existing versions.

o Upload release notes and version file to hosting servers, replacing existing versions.

o Ensure AWS S3 permissions on the uploaded files are public

o In AWS Cloudfront console, create invalidatation in downloads.opensceneryx.com distribution for the following paths:

/OpenSceneryX-Installer-Mac.dmg
/OpenSceneryX-Installer-Windows.zip
/OpenSceneryX-Installer-Linux-x86-64.zip
/OpenSceneryX-Installer-Linux-x86-32.zip
/OpenSceneryX-Installer-Linux-ARM-32.zip

o Clear Cloudflare cache for the following URLs:

https://downloads.opensceneryx.com/OpenSceneryX-Installer-Mac.dmg
https://downloads.opensceneryx.com/OpenSceneryX-Installer-Windows.zip
https://downloads.opensceneryx.com/OpenSceneryX-Installer-Linux-x86-64.zip
https://downloads.opensceneryx.com/OpenSceneryX-Installer-Linux-x86-32.zip
https://downloads.opensceneryx.com/OpenSceneryX-Installer-Linux-ARM-32.zip
https://www.opensceneryx.com/versioninfo/installerreleasenotes.html
https://www.opensceneryx.com/versioninfo/installerversion.txt


Customising the DMG
-------------------

o The template DMG should be saved as Support/template.dmg (git ignored).  This is created using Disk Utility and then customised.

o The background image is modified by copying a new one into /Volumes/OpenSceneryX Installer/.background with the DMG mounted

o The icon positions are changed by simply moving them in the template DMG and closing it.

o Other customisations are done by View -> Show View Optionsâ€¦ in the DMG.
